<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ride Tracking Map</title>
    <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    />
</head>
<style>
    #map {
        width: 100%;
        height: 100vh;
    }
</style>
<body>
<div id="map">
</div>

<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
<script>
    const map = L.map('map').setView([0, 0], 1);

    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    let currentMarker = null;

    function setMapView(lat, long, zoomLevel) {
        map.setView([lat, long], zoomLevel)
    }
    function addMarker(lat, long, id, rideName, waitTime, isOpen) {
        let icon
        if (!isOpen) {
            icon = 'https://i.ibb.co/hxs49HHB/gray-pointer.png'
        } else if (waitTime < 45){
            icon = 'https://i.ibb.co/j9jk7dHL/green-pointer.png'
        } else if (waitTime <= 95){
            icon = 'https://i.ibb.co/230X13DZ/yellow-pointer.png'
        } else {
            icon = 'https://i.ibb.co/DDXBrW9D/red-pointer.png'
        }
        const markerIcon = L.icon({
            iconUrl: icon,
            iconSize: [25, 30],
        })
        if (currentMarker) {
            map.removeLayer(currentMarker);
        }
        currentMarker = L.marker([lat, long], {
            icon: markerIcon
        }).addTo(map)
            .bindPopup(`<b>${rideName}</b><br>Wait Time: ${waitTime}`)
            .openPopup();
    }

</script>
</body>
</html>